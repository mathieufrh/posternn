<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>posternn: src/main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">posternn
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">An image posterizer using self organized maps neural network</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('main_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">main.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Main file of the program. Take care of I/O and call the other functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;opencv/highgui.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;ctype.h&gt;</code><br/>
<code>#include &lt;getopt.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="arr_8h_source.html">arr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="som_8h_source.html">som.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="util_8h_source.html">util.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.c:</div>
<div class="dyncontent">
<div class="center"><img src="main_8c__incl.png" border="0" usemap="#src_2main_8c" alt=""/></div>
<map name="src_2main_8c" id="src_2main_8c">
<area shape="rect" id="node6" href="arr_8h.html" title="arr.h" alt="" coords="419,80,467,107"/><area shape="rect" id="node8" href="som_8h.html" title="som.h" alt="" coords="491,80,548,107"/><area shape="rect" id="node10" href="util_8h.html" title="util.h" alt="" coords="579,80,629,107"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae8605e2b78cd4a81b6c6b5c30cb7366a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ae8605e2b78cd4a81b6c6b5c30cb7366a">usage</a> (void)</td></tr>
<tr class="separator:ae8605e2b78cd4a81b6c6b5c30cb7366a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a30a7c1d99382d3d205b4c924e3dd18"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a8a30a7c1d99382d3d205b4c924e3dd18">set_vars_from_args</a> (int argc, char *const argv[], int *postLevel, int *epochs, float *thresh, char *inFile, char *outFile)</td></tr>
<tr class="separator:a8a30a7c1d99382d3d205b4c924e3dd18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3ed9c200de85b53c94cd18764b246a2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#af3ed9c200de85b53c94cd18764b246a2">main</a> (int argc, char *const argv[])</td></tr>
<tr class="separator:af3ed9c200de85b53c94cd18764b246a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main file of the program. Take care of I/O and call the other functions. </p>
<dl class="section author"><dt>Author</dt><dd>Mathieu Fourcroy </dd></dl>
<dl class="section date"><dt>Date</dt><dd>07/15 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="af3ed9c200de85b53c94cd18764b246a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *const&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The main function</p>
<p>The main function scan the command line and set the program variables using the specified options or the default values. Then The function open the image from the input path and load it. Its pixels are extracted. The SOM network is trained from random values and using the image pixels. The SOM resulting neurons represent the colors used for the posterization. So the posterization function use the result of the SOM network to effectively posterized the image. The image pixels are directly modified. Finaly the modified image is saved as a new file.</p>
<dl class="section note"><dt>Note</dt><dd>The number of neurons of the network is the posterization level power two. Which means that the SOM is square. It has a number of rows and a number of columns equal to the posterization level. So it have rows * columns = rows^2 = columns^2 = posterization level^2 = number of neurons.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The transparency in file formats which support it is not correctly handled.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>0.0.2 Handle transparency with opencv and the SOM algorithm. The program currently use the number of channels of the image but it is always 3 (RGB) for now. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8c_af3ed9c200de85b53c94cd18764b246a2_cgraph.png" border="0" usemap="#main_8c_af3ed9c200de85b53c94cd18764b246a2_cgraph" alt=""/></div>
<map name="main_8c_af3ed9c200de85b53c94cd18764b246a2_cgraph" id="main_8c_af3ed9c200de85b53c94cd18764b246a2_cgraph">
<area shape="rect" id="node2" href="main_8c.html#a8a30a7c1d99382d3d205b4c924e3dd18" title="set_vars_from_args" alt="" coords="105,5,242,32"/><area shape="rect" id="node4" href="util_8c.html#a06a7e80f6a756ec12b2ac12ea3d5f206" title="get_filename_ext" alt="" coords="113,56,234,83"/><area shape="rect" id="node5" href="som_8c.html#ab268269d2bda7d28482c0627e7c102ab" title="som_train" alt="" coords="134,259,213,285"/><area shape="rect" id="node19" href="som_8c.html#a3e18491e97ad6c14f54ba35aabfab994" title="som_posterize" alt="" coords="120,107,227,133"/><area shape="rect" id="node20" href="arr_8c.html#ae906b13d297231fed02b4c779d90a08b" title="arr_to_IplImage" alt="" coords="117,309,229,336"/><area shape="rect" id="node3" href="main_8c.html#ae8605e2b78cd4a81b6c6b5c30cb7366a" title="usage" alt="" coords="331,5,389,32"/><area shape="rect" id="node6" href="util_8c.html#a92c1113e88f00f1fe38f88e29ea085e4" title="random_sample" alt="" coords="303,157,417,184"/><area shape="rect" id="node7" href="util_8c.html#afd86049c98dab897936e62cc9851a838" title="random_uint" alt="" coords="313,208,407,235"/><area shape="rect" id="node8" href="som_8c.html#a299abea75e13175cea5a3dbe748c65a1" title="euclidian" alt="" coords="323,56,397,83"/><area shape="rect" id="node10" href="arr_8c.html#aabea581597f4de853707a7af358fc66c" title="arr_min_idx" alt="" coords="315,107,405,133"/><area shape="rect" id="node11" href="som_8c.html#a577de332dd926969d02e86228f65ad8f" title="som_radius" alt="" coords="315,259,405,285"/><area shape="rect" id="node12" href="som_8c.html#a1603f0fc083688b151b2ad414f9120a5" title="som_neighbourhood" alt="" coords="291,309,429,336"/><area shape="rect" id="node14" href="som_8c.html#ad269dc9f88dff13ec50497edc5bde2b0" title="som_learning_rate" alt="" coords="296,360,424,387"/><area shape="rect" id="node15" href="som_8c.html#a392441531c1d2025232854783e7014bf" title="compute_delta" alt="" coords="307,411,413,437"/><area shape="rect" id="node16" href="arr_8c.html#a5a5edd40e86c7ab2dbc6a47eecad7e60" title="arr_add" alt="" coords="327,461,393,488"/><area shape="rect" id="node17" href="arr_8c.html#af4a473c67a36913419215a574e0d06eb" title="arr_abs" alt="" coords="327,512,393,539"/><area shape="rect" id="node18" href="arr_8c.html#a6c0fddffe790f7e4e09e3e2d283f3813" title="arr_sum" alt="" coords="325,563,395,589"/><area shape="rect" id="node9" href="arr_8c.html#a1e06cf9c399bc46a3053d007b27d4b8a" title="arr_sub" alt="" coords="509,56,574,83"/><area shape="rect" id="node13" href="som_8c.html#a1b36e26588b00c18c3b967366b63bca4" title="compute_distance" alt="" coords="477,309,605,336"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8a30a7c1d99382d3d205b4c924e3dd18"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int set_vars_from_args </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *const&#160;</td>
          <td class="paramname"><em>argv</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>postLevel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>epochs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>thresh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>inFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>outFile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Parse the options from the command line.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">argc</td><td>Number of arguments on the command line. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argv</td><td>The arguments of the command line. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">postLevel</td><td>Posterization level (set by -l / default: 2). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">epochs</td><td>Number of training stage (set by -e / default: 3000). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">thresh</td><td>Network threshold value (set by -t / default: 0.001). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">inFile</td><td>Path to the input image (must be set with -i). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">outFile</td><td>Path to the output image (set by -o). </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8c_a8a30a7c1d99382d3d205b4c924e3dd18_cgraph.png" border="0" usemap="#main_8c_a8a30a7c1d99382d3d205b4c924e3dd18_cgraph" alt=""/></div>
<map name="main_8c_a8a30a7c1d99382d3d205b4c924e3dd18_cgraph" id="main_8c_a8a30a7c1d99382d3d205b4c924e3dd18_cgraph">
<area shape="rect" id="node2" href="main_8c.html#ae8605e2b78cd4a81b6c6b5c30cb7366a" title="usage" alt="" coords="193,5,250,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8c_a8a30a7c1d99382d3d205b4c924e3dd18_icgraph.png" border="0" usemap="#main_8c_a8a30a7c1d99382d3d205b4c924e3dd18_icgraph" alt=""/></div>
<map name="main_8c_a8a30a7c1d99382d3d205b4c924e3dd18_icgraph" id="main_8c_a8a30a7c1d99382d3d205b4c924e3dd18_icgraph">
<area shape="rect" id="node2" href="main_8c.html#af3ed9c200de85b53c94cd18764b246a2" title="main" alt="" coords="192,5,243,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae8605e2b78cd4a81b6c6b5c30cb7366a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usage </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Print a usage message. </p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8c_ae8605e2b78cd4a81b6c6b5c30cb7366a_icgraph.png" border="0" usemap="#main_8c_ae8605e2b78cd4a81b6c6b5c30cb7366a_icgraph" alt=""/></div>
<map name="main_8c_ae8605e2b78cd4a81b6c6b5c30cb7366a_icgraph" id="main_8c_ae8605e2b78cd4a81b6c6b5c30cb7366a_icgraph">
<area shape="rect" id="node2" href="main_8c.html#a8a30a7c1d99382d3d205b4c924e3dd18" title="set_vars_from_args" alt="" coords="113,5,250,32"/><area shape="rect" id="node3" href="main_8c.html#af3ed9c200de85b53c94cd18764b246a2" title="main" alt="" coords="299,5,349,32"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="main_8c.html">main.c</a></li>
    <li class="footer">Generated on Thu Aug 20 2015 17:06:40 for posternn by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
